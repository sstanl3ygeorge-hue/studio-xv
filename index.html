<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Studio XV</title>
  <link rel="icon" type="image/png" href="/favicon.png">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Stripe.js for ebook checkout (TEST MODE) -->
  <!-- SAFE TO REMOVE: Delete this line to disable Stripe checkout -->
  <script src="https://js.stripe.com/v3/"></script>

  <style>
    :root {
      /* DARK MODE (DEFAULT) */
      --bg-main: #000000;
      --bg-section: #0d0d0d;
      --bg-card: #111111;
      --bg-soft: #181818;

      --text-main: #ffffff;
      --text-muted: #b5b5b5;

      --accent: #f97316; /* orange */
      --border-soft: rgba(255,255,255,0.12);
    }

    @media (prefers-color-scheme: light) {
      :root {
        /* LIGHT MODE OVERRIDES */
        --bg-main: #ffffff;
        --bg-section: #f5f5f5;
        --bg-card: #ffffff;
        --bg-soft: #eeeeee;

        --text-main: #0b0b0b;
        --text-muted: #555555;

        --border-soft: rgba(0,0,0,0.12);
      }
    }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg-main);
      color: var(--text-main);
      overflow-x: hidden;
    }

    html {
      scroll-behavior: smooth;
    }

    .mobile-link {
      font-weight: 600;
      letter-spacing: 0.05em;
      padding: 0.75rem 0;
      transition: color 0.25s ease;
    }

    section {
      scroll-margin-top: 96px;
    }

    .step {
      opacity: 0;
      transform: translateY(12px);
      pointer-events: none;
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .step.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    audio {
      opacity: 0.85;
      transition: opacity 0.2s ease, box-shadow 0.2s ease;
    }

    audio:hover {
      opacity: 1;
      box-shadow: 0 0 0 1px rgba(249,115,22,0.4);
    }

    .badges {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 0.75rem;
    }

    .badge {
      font-size: 0.75rem;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--border-soft);
      letter-spacing: 0.04em;
    }

    .waveform {
      height: 80px;
      margin-bottom: 0.75rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      font-size: 0.85rem;
    }

    .play-btn,
    .toggle-btn {
      background: none;
      border: none;
      color: var(--accent);
      cursor: pointer;
    }

    .play-btn:hover,
    .toggle-btn:hover {
      text-decoration: underline;
    }

    .ab-toggle {
      display: inline-flex;
      align-items: center;
      gap: 0;
    }

    .ab-btn {
      background: none;
      border: none;
      padding: 0;
      color: #f97316;
      cursor: pointer;
      font-weight: 500;
      text-decoration: none;
      font-size: inherit;
    }

    .ab-btn:hover {
      text-decoration: underline;
    }

    .ab-btn.active {
      font-weight: 600;
    }

    .separator {
      margin: 0 6px;
      color: #888;
      pointer-events: none;
    }

    .waveform-player.playing {
      background: rgba(249,115,22,0.08);
      border: 1px solid rgba(249,115,22,0.3);
      box-shadow: 0 0 20px rgba(249,115,22,0.15);
      transition: all 0.3s ease;
    }

    /* Booking form micro-interactions */
    input:not([type="file"]),
    select,
    textarea {
      transition: all 0.2s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* Checkbox animations */
    input[type="checkbox"] {
      transition: transform 0.2s ease;
    }

    input[type="checkbox"]:checked {
      transform: scale(1.1);
    }

    label:has(input[type="checkbox"]:checked) {
      animation: checkboxPulse 0.3s ease;
    }

    @keyframes checkboxPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }

    /* Price summary transitions */
    #deposit-display,
    #summary-addons {
      transition: all 0.3s ease;
    }

    #deposit-display.updating {
      animation: priceUpdate 0.4s ease;
    }

    @keyframes priceUpdate {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Light mode form input styling */
    @media (prefers-color-scheme: light) {
      input:not([type="file"]):not([type="checkbox"]),
      select,
      textarea {
        background: white !important;
        border-color: rgba(0,0,0,0.15) !important;
        color: black !important;
      }

      input:not([type="file"]):not([type="checkbox"]):focus,
      select:focus,
      textarea:focus {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
      }
    }

    /* Mobile spacing improvements */
    @media (max-width: 768px) {
      #booking .space-y-8 > * + * {
        margin-top: 2rem;
      }

      #booking input:not([type="file"]):not([type="checkbox"]),
      #booking select,
      #booking textarea,
      #booking button[type="submit"] {
        min-height: 48px;
        font-size: 16px;
      }

      #booking input[type="checkbox"] {
        width: 24px;
        height: 24px;
        min-width: 24px;
        min-height: 24px;
      }

      #booking label:has(input[type="checkbox"]) {
        padding: 12px 0;
        gap: 16px;
      }

      #booking .rounded-2xl {
        padding: 24px;
      }

      #booking textarea {
        min-height: 120px;
      }
    }

    /* Service Modal */
    #service-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 100;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    #service-modal.active {
      display: flex;
      animation: fadeIn 0.3s ease;
    }

    #service-modal-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
    }

    #service-modal-content {
      position: relative;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      border-radius: 16px;
      padding: 40px;
      animation: modalScale 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes modalScale {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    #service-modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid var(--border-soft);
      background: var(--bg-card);
    }

    #service-modal-close:hover {
      transform: scale(1.1);
      opacity: 1;
    }

    /* Hide old service detail sections - using modal instead */
    section#recording,
    section#mixing,
    section#mastering,
    section#production,
    section#lessons {
      display: none !important;
    }
  </style>
</head>

<body>

<!-- Service Modal -->
<div id="service-modal">
  <div id="service-modal-overlay"></div>
  <div id="service-modal-content" style="background: var(--bg-soft);">
    <div id="service-modal-close" title="Close">âœ•</div>
    <div id="service-modal-body"></div>
  </div>
</div>

<!-- NAV -->
<!-- Navigation clarified to separate exploration, learning, listening, and booking. -->
<nav class="fixed top-0 left-0 right-0 z-50 backdrop-blur"
     style="background: var(--bg-main); color: var(--text-main);">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
    <a href="#home" id="logo-nav" class="text-xl font-bold">Studio XV</a>

    <!-- Desktop -->
    <div class="hidden md:flex space-x-8">
      <a href="#home" class="transition hover:text-[var(--accent)]">Home</a>
      <a href="#services" class="transition hover:text-[var(--accent)]">Services</a>
      <a href="#portfolio" class="transition hover:text-[var(--accent)]">Listen</a>
      <a href="#learn" class="transition hover:text-[var(--accent)]">Learn</a>
      <a href="#booking" class="transition hover:text-[var(--accent)]">Book</a>
    </div>

    <!-- Mobile toggle -->
    <button id="menu-toggle" class="md:hidden text-3xl">â˜°</button>
  </div>
</nav>

<div id="mobile-menu"
  class="fixed top-0 right-0 h-full w-4/5 max-w-sm
         transform translate-x-full transition-transform duration-300 z-[9999] shadow-2xl"
  style="background: var(--bg-main); color: var(--text-main);">

  <div class="flex justify-end p-6">
    <button id="menu-close" class="text-3xl">âœ•</button>
  </div>

  <nav class="flex flex-col gap-8 text-center mt-10 text-xl">
    <a href="#home" class="mobile-link hover:text-[var(--accent)]">Home</a>
    <a href="#services" class="mobile-link hover:text-[var(--accent)]">Services</a>
    <a href="#portfolio" class="mobile-link hover:text-[var(--accent)]">Listen</a>
    <a href="#learn" class="mobile-link hover:text-[var(--accent)]">Learn</a>
    <a href="#booking" class="mobile-link hover:text-[var(--accent)]">Book</a>
  </nav>
</div>

<!-- HERO -->
<section id="home" class="min-h-screen pt-24 flex items-center justify-center px-6"
         style="background: var(--bg-main);">
  <div class="text-center space-y-12 w-full max-w-4xl mx-auto">
    <a href="#services" id="logo-hero" class="block">
      <div class="leading-none">
        <div class="tracking-[0.3em] opacity-80">STUDIO</div>
        <div class="text-7xl font-extrabold">XV</div>
      </div>
    </a>

    <div class="space-y-6 max-w-2xl mx-auto">
      <h1 class="text-3xl md:text-4xl font-bold leading-tight">A studio that helps you create your best work.</h1>
      <!-- Homepage orientation: clarifying purpose -->
      <p class="text-base opacity-60" style="color: var(--text-muted);">
        A dedicated studio for recording, mixing, mastering, production support, and learning available from any location.
      </p>
      <p class="text-lg md:text-xl opacity-80 leading-relaxed">From recording and mixing to beats, mastering, and oneâ€‘toâ€‘one guidance all accessible remotely or inâ€‘person.</p>
    </div>

    <a href="#services"
      class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90"
      style="background: var(--accent);">
      Explore Services
    </a>

    <!-- WHAT ARE YOU WORKING ON -->
    <div class="pt-8">
      <p class="text-sm uppercase tracking-wider opacity-50 mb-8">What are you working on?</p>
      
      <div class="flex flex-wrap justify-center gap-x-8 gap-y-4 text-base">
        <a href="javascript:void(0)" onclick="openServiceModal('recording')"
           class="hover:text-orange-500 transition underline-offset-4 hover:underline cursor-pointer">
          Recording
        </a>
        <a href="javascript:void(0)" onclick="openServiceModal('mixing')"
           class="hover:text-orange-500 transition underline-offset-4 hover:underline cursor-pointer">
          Mixing
        </a>
        <a href="javascript:void(0)" onclick="openServiceModal('mastering')"
           class="hover:text-orange-500 transition underline-offset-4 hover:underline cursor-pointer">
          Mastering
        </a>
        <a href="javascript:void(0)" onclick="openServiceModal('production')"
           class="hover:text-orange-500 transition underline-offset-4 hover:underline cursor-pointer">
          Beats & Production
        </a>
        <!-- Production Lessons removed from hero list (not needed here, still accessible via Services section and modal system) -->
      </div>
      
      <!-- Contextual lessons note (easily removable) -->
      <p class="text-sm leading-relaxed mt-8 max-w-2xl mx-auto" style="color: var(--text-muted);">
        If you're working through a project and want guidance, one-to-one Zoom lessons and self-paced courses are available alongside sessions.
      </p>
    </div>
  </div>
</section>

<!-- ========================================== -->
<!-- SERVICES SECTION -->
<!-- ========================================== -->
<section id="services" class="pt-16 pb-24 px-6" style="background: var(--bg-section);">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-bold text-center mb-4">
      Services
    </h2>
    <p class="text-center mb-16">
      <a href="javascript:void(0)" onclick="openHowItWorksModal()" class="text-sm opacity-70 hover:text-orange-500 hover:opacity-100 transition underline-offset-4 hover:underline cursor-pointer">
        How sessions work â†’
      </a>
    </p>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Recording -->
      <div onclick="openServiceModal('recording')" class="block group rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-orange-500 hover:shadow-xl cursor-pointer" style="background: var(--bg-card);">
        <h3 class="text-2xl font-bold mb-6 group-hover:text-orange-500 transition">
          Recording
        </h3>
        <ul class="space-y-4 text-sm">
          <li class="flex justify-between">
            <span>Hourly Session</span>
            <span>Â£30/hr</span>
          </li>
          <li class="flex justify-between">
            <span>Half-Day (4hrs)</span>
            <span>Â£140</span>
          </li>
          <li class="flex justify-between">
            <span>Full-Day (8hrs)</span>
            <span>Â£260</span>
          </li>
        </ul>
      </div>

      <!-- Mixing -->
      <div onclick="openServiceModal('mixing')" class="block group rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-orange-500 hover:shadow-xl cursor-pointer" style="background: var(--bg-card);">
        <h3 class="text-2xl font-bold mb-6 group-hover:text-orange-500 transition">
          Mixing
        </h3>
        <ul class="space-y-4 text-sm">
          <li class="flex justify-between">
            <span>Per Track</span>
            <span>Â£50</span>
          </li>
          <li class="flex justify-between">
            <span>Mix + Master</span>
            <span>Â£75</span>
          </li>
          <li class="flex justify-between">
            <span>EP (4â€“6 tracks)</span>
            <span>Â£280</span>
          </li>
        </ul>
      </div>

      <!-- Mastering -->
      <div onclick="openServiceModal('mastering')" class="block group rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-orange-500 hover:shadow-xl cursor-pointer" style="background: var(--bg-card);">
        <h3 class="text-2xl font-bold mb-6 group-hover:text-orange-500 transition">
          Mastering
        </h3>
        <ul class="space-y-4 text-sm">
          <li class="flex justify-between">
            <span>Single</span>
            <span>Â£35</span>
          </li>
          <li class="flex justify-between">
            <span>EP (4â€“6 tracks)</span>
            <span>Â£120</span>
          </li>
          <li class="flex justify-between">
            <span>Album (10+ tracks)</span>
            <span>Â£250</span>
          </li>
        </ul>
      </div>

      <!-- Production -->
      <div onclick="openServiceModal('production')" class="block group rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-orange-500 hover:shadow-xl cursor-pointer" style="background: var(--bg-card);">
        <h3 class="text-2xl font-bold mb-6 group-hover:text-orange-500 transition">
          Production
        </h3>
        <ul class="space-y-4 text-sm">
          <li class="flex justify-between">
            <span>Beat Lease</span>
            <span>Â£40</span>
          </li>
          <li class="flex justify-between">
            <span>Exclusive Beat</span>
            <span>Â£150</span>
          </li>
          <li class="flex justify-between">
            <span>Custom Production</span>
            <span>Â£500</span>
          </li>
        </ul>
      </div>

      <!-- Lessons -->
      <div onclick="openServiceModal('lessons')" class="block group rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-orange-500 hover:shadow-xl cursor-pointer" style="background: var(--bg-card);">
        <h3 class="text-2xl font-bold mb-6 group-hover:text-orange-500 transition">
          Lessons
        </h3>
        <ul class="space-y-4 text-sm">
          <li class="flex justify-between">
            <span>Hourly Session</span>
            <span>Â£40/hr</span>
          </li>
          <li class="flex justify-between">
            <span>2-Hour Session</span>
            <span>Â£80</span>
          </li>
          <li class="flex justify-between">
            <span>4-Hour Session</span>
            <span>Â£160</span>
          </li>
        </ul>
      </div>

      <!-- Add-Ons -->
      <div onclick="openServiceModal('addons')" class="lg:col-span-3 block group rounded-2xl p-8 border border-white/10 transition-all duration-300 hover:-translate-y-2 hover:border-orange-500 hover:shadow-xl cursor-pointer" style="background: var(--bg-card);">
        <h3 class="text-2xl font-bold mb-6 group-hover:text-orange-500 transition">
          Add-Ons
        </h3>
        <ul class="space-y-4 text-sm">
          <li class="flex justify-between">
            <span>Vocal Tuning</span>
            <span>Â£25</span>
          </li>
          <li class="flex justify-between">
            <span>Stems Export</span>
            <span>Â£20</span>
          </li>
          <li class="flex justify-between">
            <span>Rush Delivery</span>
            <span>+50%</span>
          </li>
        </ul>
      </div>
    </div>
  </div>
</section>
<!-- END SERVICES SECTION -->

<!-- This section is locked. Any changes require explicit manual approval. -->
<!-- LOCKED SECTION: PORTFOLIO â€” DO NOT MODIFY -->
<!-- LOCKED: Legacy production component. Do not modify -->
<section id="portfolio" class="py-32 px-6" style="background: var(--bg-main);">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-bold text-center mb-16">Portfolio</h2>
    <div class="grid md:grid-cols-2 gap-12">
      <!-- Left: Recent Mixes -->
      <div>
        <h2 class="text-3xl md:text-4xl font-bold mb-8">Recent Mixes</h2>
        <div class="space-y-8">
          <div class="rounded-xl p-6 border border-white/10" style="background: var(--bg-card);">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">City Lights</span>
              <span class="text-xs opacity-70">Afro House</span>
            </div>
            <div class="badges mb-2">
              <span class="badge">Produced</span>
              <span class="badge">Mixed</span>
              <span class="badge">Mastered</span>
            </div>
            <div class="waveform-player" data-after="https://studioxv-media.b-cdn.net/mixes/city-lights-after.mp3" data-before="https://studioxv-media.b-cdn.net/mixes/city-lights-before.mp3" data-current="after" data-index="0">
              <div class="waveform"></div>
              <div class="controls mt-2">
                <button class="play-btn">Play</button>
                <div class="ab-toggle ml-4">
                  <button class="ab-btn" data-mode="before">Raw</button>
                  <span class="separator">/</span>
                  <button class="ab-btn active" data-mode="after">After</button>
                </div>
              </div>
            </div>
            <p class="text-xs opacity-60 mt-3">
              Like this sound? <a href="#booking" class="text-orange-500 font-semibold hover:underline">Book a mixing session â†’</a>
            </p>
          </div>
          <div class="rounded-xl p-6 border border-white/10" style="background: var(--bg-card);">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Midnight Drive</span>
              <span class="text-xs opacity-70">Trap</span>
            </div>
            <div class="badges mb-2">
              <span class="badge">Mastered</span>
            </div>
            <div class="waveform-player" data-after="https://studioxv-media.b-cdn.net/mixes/midnight-drive-after.mp3" data-before="https://studioxv-media.b-cdn.net/mixes/midnight-drive-before.mp3" data-current="after" data-index="1">
              <div class="waveform"></div>
              <div class="controls mt-2">
                <button class="play-btn">Play</button>
                <div class="ab-toggle ml-4">
                  <button class="ab-btn" data-mode="before">Raw</button>
                  <span class="separator">/</span>
                  <button class="ab-btn active" data-mode="after">After</button>
                </div>
              </div>
            </div>
            <p class="text-xs opacity-60 mt-3">
              Like this sound? <a href="#booking" class="text-orange-500 font-semibold hover:underline">Book a mixing session â†’</a>
            </p>
          </div>
          <div class="rounded-xl p-6 border border-white/10" style="background: var(--bg-card);">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Elevation</span>
              <span class="text-xs opacity-70">Afrobeats</span>
            </div>
            <div class="badges mb-2">
              <span class="badge">Mixed</span>
              <span class="badge">Mastered</span>
            </div>
            <div class="waveform-player" data-after="https://studioxv-media.b-cdn.net/mixes/Elevation-after.mp3" data-before="https://studioxv-media.b-cdn.net/mixes/Elevation-before.mp3" data-current="after" data-index="2">
              <div class="waveform"></div>
              <div class="controls mt-2">
                <button class="play-btn">Play</button>
                <div class="ab-toggle ml-4">
                  <button class="ab-btn" data-mode="before">Raw</button>
                  <span class="separator">/</span>
                  <button class="ab-btn active" data-mode="after">After</button>
                </div>
              </div>
            </div>
            <p class="text-xs opacity-60 mt-3">
              Like this sound? <a href="#booking" class="text-orange-500 font-semibold hover:underline">Book a mixing session â†’</a>
            </p>
          </div>
        </div>
      </div>
      <!-- Right: Beat Catalogue -->
      <div>
        <h2 class="text-3xl md:text-4xl font-bold mb-8">Beat Catalogue</h2>
        <div class="space-y-8">
          <div class="rounded-xl p-6 border border-white/10" style="background: var(--bg-card);">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Neon Dreams</span>
              <span class="text-xs opacity-70">Trap / Melodic</span>
            </div>
            <div class="text-xs opacity-70 mb-2">Dâ™¯ minor Â· 140 BPM</div>
            <div class="waveform-player" data-after="https://studioxv-media.b-cdn.net/beats/neon-dreams.mp3" data-current="after" data-index="3">
              <div class="waveform"></div>
              <div class="controls mt-2">
                <button class="play-btn">Play</button>
              </div>
            </div>
            <div class="text-xs opacity-80 mt-2">Available for lease or exclusive</div>
            <p class="text-xs opacity-60 mt-3">
              Want to record on this beat? <a href="#booking" class="text-orange-500 font-semibold hover:underline">Start a session â†’</a>
            </p>
          </div>
          <div class="rounded-xl p-6 border border-white/10" style="background: var(--bg-card);">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Street Gospel</span>
              <span class="text-xs opacity-70">Afro pop</span>
            </div>
            <div class="text-xs opacity-70 mb-2">D major Â· 113 BPM</div>
            <div class="waveform-player" data-after="https://studioxv-media.b-cdn.net/beats/street-gospel.mp3" data-current="after" data-index="4">
              <div class="waveform"></div>
              <div class="controls mt-2">
                <button class="play-btn">Play</button>
              </div>
            </div>
            <div class="text-xs opacity-80 mt-2">Available for lease or exclusive</div>
            <p class="text-xs opacity-60 mt-3">
              Want to record on this beat? <a href="#booking" class="text-orange-500 font-semibold hover:underline">Start a session â†’</a>
            </p>
          </div>
          <div class="rounded-xl p-6 border border-white/10" style="background: var(--bg-card);">
            <div class="flex items-center justify-between mb-2">
              <span class="font-semibold">Summer Breeze</span>
              <span class="text-xs opacity-70">Afrobeats</span>
            </div>
            <div class="text-xs opacity-70 mb-2">C minor Â· 100 BPM</div>
            <div class="waveform-player" data-after="https://studioxv-media.b-cdn.net/beats/summer-breeze.mp3" data-current="after" data-index="5">
              <div class="waveform"></div>
              <div class="controls mt-2">
                <button class="play-btn">Play</button>
              </div>
            </div>
            <div class="text-xs opacity-80 mt-2">Available for lease or exclusive</div>
            <p class="text-xs opacity-60 mt-3">
              Want to record on this beat? <a href="#booking" class="text-orange-500 font-semibold hover:underline">Start a session â†’</a>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center mt-16">
      <p class="text-lg opacity-80 mb-6">
        Want your track to sound like this?
      </p>
      <a href="#booking" class="inline-block px-8 py-4 rounded-lg font-semibold text-white" style="background: var(--accent);">Book a Session</a>
    </div>
  </div>
</section>
<!-- END LOCKED SECTION -->

<!-- ========================================== -->
<!-- LEARN SECTION â€” LOCKED STRUCTURE -->
<!-- DO NOT MODIFY: This section is structurally locked -->
<!-- DO NOT change order, add/remove items, or alter navigation -->
<!-- Content expansion belongs on dedicated pages, not here -->
<!-- ========================================== -->
<section id="learn" class="py-32 px-6 border-t" style="background: var(--bg-section); border-color: var(--border-soft);">
  <div class="max-w-4xl mx-auto">
    
    <!-- LOCKED: Page header and framing copy -->
    <div class="mb-16 max-w-2xl">
      <h2 class="text-4xl md:text-5xl font-bold mb-4">Learn the process</h2>
      <p class="text-base opacity-70">
        Resources for producers who want to finish tracks with clarity and confidence.
      </p>
    </div>

    <!-- ========================================== -->
    <!-- LOCKED: START HERE ROADMAP -->
    <!-- DO NOT modify steps or order -->
    <!-- ========================================== -->
    <div class="mb-12 pb-12 border-b" style="border-color: var(--border-soft);">
      <h3 class="text-xl font-semibold mb-6">Start here</h3>
      
      <ol class="space-y-3 text-base max-w-xl">
        <li>1. Read the ebook</li>
        <li>2. Take a mini course</li>
        <li>3. Apply the process</li>
        <li>4. Book a session when ready</li>
      </ol>
    </div>
    <!-- END: Start here roadmap -->
    <!-- ========================================== -->

    <!-- ========================================== -->
    <!-- LOCKED: RESOURCE LINKS -->
    <!-- Three main learning resource categories -->
    <!-- ========================================== -->
    <div class="space-y-4">
      <a href="learn-courses.html" class="block p-6 rounded-lg border transition hover:border-[var(--accent)] hover:transform hover:translate-x-1" style="background: var(--bg-card); border-color: var(--border-soft);">
        <h3 class="text-xl font-semibold mb-2">Courses</h3>
        <p class="text-sm opacity-70">30 mini courses organized by difficulty Â· Â£15-Â£28 each</p>
      </a>
      
      <a href="learn-ebooks.html" class="block p-6 rounded-lg border transition hover:border-[var(--accent)] hover:transform hover:translate-x-1" style="background: var(--bg-card); border-color: var(--border-soft);">
        <h3 class="text-xl font-semibold mb-2">Ebooks</h3>
        <p class="text-sm opacity-70">Step-by-step guides for finishing tracks Â· Â£12</p>
      </a>
      
      <a href="learn-tools.html" class="block p-6 rounded-lg border transition hover:border-[var(--accent)] hover:transform hover:translate-x-1" style="background: var(--bg-card); border-color: var(--border-soft);">
        <h3 class="text-xl font-semibold mb-2">Tools & Templates</h3>
        <p class="text-sm opacity-70">Checklists and reference materials Â· Coming soon</p>
      </a>
    </div>
    <!-- END: Resource links -->
    <!-- ========================================== -->

  </div>
</section>
<!-- ========================================== -->
<!-- END LOCKED SECTION: LEARN -->
<!-- This section is structurally frozen -->
<!-- All future content expansion happens on dedicated pages -->
<!-- ========================================== -->

<!-- ========================================== -->
<!-- LOCKED: FEATURED COURSE TEASER -->
<!-- DO NOT modify structure or add additional courses here -->
<!-- This is a single spotlight section only -->
<!-- Brief introduction linking to full course page -->
<!-- ========================================== -->
<section id="featured-course" class="py-24 px-6 border-t" style="background: var(--bg-main); border-color: var(--border-soft);">
  <div class="max-w-3xl mx-auto">
    
    <div class="space-y-6">
      <div class="space-y-3">
        <h2 class="text-3xl md:text-4xl font-bold">Featured course</h2>
        <h3 class="text-2xl md:text-3xl font-bold">Finishing Tracks Without Overthinking</h3>
        <p class="text-sm opacity-60">Video course Â· ~75 minutes Â· Beginner â†’ Intermediate</p>
      </div>
      
      <p class="text-base opacity-80 leading-relaxed">
        Most producers don't struggle with technical skillsâ€”they struggle with knowing when to stop, what to prioritize, and how to trust their decisions. This course focuses on the decision-making frameworks that help you finish tracks without second-guessing every choice.
      </p>
      
      <ul class="space-y-2 opacity-80">
        <li>â€¢ Identify what matters most in your mix and eliminate unnecessary steps</li>
        <li>â€¢ Make clear decisions when you're stuck or second-guessing</li>
        <li>â€¢ Build a repeatable finishing process that works for you</li>
        <li>â€¢ Know when your track is ready and release it with confidence</li>
      </ul>
      
      <div class="pt-4">
        <div class="inline-block px-8 py-3 rounded-lg text-base font-medium"
           style="background: var(--border-soft); color: var(--text-muted); cursor: not-allowed;">
          Coming soon
        </div>
      </div>
      
      <p class="text-sm opacity-60 pt-2">
        For producers with unfinished tracks who keep tweaking endlessly
      </p>
    </div>
    
  </div>
</section>
<!-- ========================================== -->
<!-- END LOCKED SECTION: FEATURED COURSE TEASER -->
<!-- ========================================== -->

<!-- ========================================== -->
<!-- BOOKING SECTION -->
<!-- Main booking form - appears only once -->
<!-- ========================================== -->
<section id="booking" class="py-32 px-6" style="background: var(--bg-main);">
  <div class="max-w-3xl mx-auto">
    <!-- Booking reassurance (easily removable) -->
    <p class="text-sm text-center opacity-60 mb-8" style="color: var(--text-muted);">
      Most people explore the work or learning resources first.
    </p>
    
    <h2 class="text-4xl md:text-5xl font-bold text-center mb-16">
      Book Your Session
    </h2>

    <div class="rounded-2xl p-10 shadow-xl" style="background: var(--bg-soft);">

      <p class="text-xs uppercase tracking-wider opacity-50 mb-4 text-center font-semibold">
        Step 1 of 3 â€” Session details
      </p>

      <p id="booking-status" class="text-sm opacity-0 mb-6 text-center transition-opacity duration-300">
        You're booking a session
      </p>

      <form
        name="booking"
        method="POST"
        data-netlify="true"
        netlify-honeypot="bot-field"
        enctype="multipart/form-data"
        class="space-y-8"
      >
        <input type="hidden" name="form-name" value="booking" />
        <input type="hidden" name="subject" value="Studio XV â€” Booking Request Received (Payment Pending)" />
        <input type="hidden" name="reply-to" value="email" />
        <input type="hidden" name="booking-status" value="âš ï¸ PAYMENT PENDING - Awaiting Stripe checkout completion" />

        <!-- Booking Metadata (for backend automation) -->
        <input type="hidden" id="metadata-service-type" name="metadata-service-type" value="" />
        <input type="hidden" id="metadata-package-hours" name="metadata-package-hours" value="" />
        <input type="hidden" id="metadata-deposit-amount" name="metadata-deposit-amount" value="" />
        <input type="hidden" id="metadata-has-files" name="metadata-has-files" value="false" />
        <input type="hidden" id="metadata-has-cloud-link" name="metadata-has-cloud-link" value="false" />

        <!-- Honeypot -->
        <p class="hidden">
          <label>
            Don't fill this out:
            <input name="bot-field" />
          </label>
        </p>

        <!-- Service -->
        <!-- BOOKING FORM LOGIC â€” DO NOT MODIFY WITHOUT EXPLICIT INSTRUCTION -->
        <div>
          <label class="block mb-2 font-semibold">Service</label>
          <select
            name="service"
            id="service-select"
            required
            class="w-full px-4 py-3 rounded-lg border"
            style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
          >
            <option value="">Select a serviceâ€¦</option>
            <option value="recording">Recording</option>
            <option value="mixing">Mixing</option>
            <option value="mastering">Mastering</option>
            <option value="production">Production</option>
            <option value="lessons">Lessons</option>
          </select>
        </div>
        <!-- Secondary input: shown contextually below -->
        <div id="secondary-input-wrapper" class="mt-4"></div>

        <!-- Package selector -->
        <section id="package-wrapper" class="hidden">
          <label class="text-sm opacity-70 mb-2 block">Package</label>
          <select
            id="package-select"
            class="w-full px-4 py-3 rounded-lg border"
            style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
          >
            <option value="">Choose a packageâ€¦</option>
          </select>
        </section>

        <!-- Hours (shown for hourly services only) -->
        <div id="hours-wrapper" class="hidden space-y-2">
          <label class="text-sm opacity-70" id="hours-label">Number of hours</label>
          <input
            type="number"
            id="hours-input"
            min="1"
            value="2"
            class="w-full px-4 py-3 rounded-lg border focus:outline-none"
            style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
          />
          <p class="text-xs opacity-60" id="hours-hint">Most artists book 2â€“4 hours.</p>
        </div>

        <!-- Add-Ons -->
        <div id="addons-wrapper" class="space-y-3">
          <label class="block font-semibold">Add-Ons (optional)</label>
          
          <label class="flex items-center gap-3 cursor-pointer">
            <input
              type="checkbox"
              class="addon-checkbox w-5 h-5"
              value="vocalTuning"
            />
            <span>Vocal Tuning â€” Â£25</span>
          </label>

          <label class="flex items-center gap-3 cursor-pointer">
            <input
              type="checkbox"
              class="addon-checkbox w-5 h-5"
              value="stems"
            />
            <span>Stems Export â€” Â£20</span>
          </label>

          <label class="flex items-center gap-3 cursor-pointer">
            <input
              type="checkbox"
              class="addon-checkbox w-5 h-5"
              value="rush"
            />
            <span>Rush Delivery â€” +50%</span>
          </label>
        </div>

        <!-- Your details -->
        <div class="grid md:grid-cols-2 gap-6">
          <input
            type="text"
            name="name"
            placeholder="Full Name"
            required
            class="px-4 py-3 rounded-lg border"
            style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
          />
          <input
            type="email"
            name="email"
            placeholder="Email"
            required
            class="px-4 py-3 rounded-lg border"
            style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
          />
        </div>

        <input
          type="tel"
          name="phone"
          placeholder="Phone number"
          class="w-full px-4 py-3 rounded-lg border"
          style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
        />

        <input
          type="date"
          name="preferred-date"
          class="w-full px-4 py-3 rounded-lg border"
          style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main); color-scheme: dark;"
        />

        <!-- File upload -->
        <div>
          <label class="block mb-2 font-semibold">
            Upload audio / stems (optional)
          </label>
          <input
            type="file"
            name="audio"
            accept=".mp3,.wav,.zip,.aiff"
            multiple
            class="w-full text-sm
              file:bg-orange-600 file:text-white
              file:border-none file:px-4 file:py-2
              file:rounded-lg file:cursor-pointer
              hover:file:bg-orange-500"
          />
          <p class="text-xs opacity-60 mt-2">Upload one or more files. For stems, select all files at once. WAV or AIFF preferred. For large sessions, a cloud link may be faster.</p>
        </div>

        <!-- Cloud Storage Link -->
        <div>
          <label class="block mb-2 font-semibold">
            Or provide a cloud storage link (optional)
          </label>
          <input
            type="url"
            name="cloud-link"
            placeholder="Dropbox, Google Drive, WeTransfer, etc."
            class="w-full px-4 py-3 rounded-lg border focus:outline-none"
            style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
          />
          <p id="upload-hint" class="text-xs opacity-60 mt-2" style="display: none;"></p>
        </div>

        <!-- Notes -->
        <textarea
          name="details"
          rows="4"
          placeholder="Tell us about your projectâ€¦"
          class="w-full px-4 py-3 rounded-lg border"
          style="background: var(--bg-card); border-color: var(--border-soft); color: var(--text-main);"
        ></textarea>

        <!-- Price Summary -->
        <div class="rounded-xl p-5 border space-y-2" style="background: var(--bg-card); border-color: var(--border-soft);">
          <div class="flex justify-between">
            <span>Total session price</span>
            <span class="font-semibold">Â£<span id="total-display">0</span></span>
          </div>

          <div id="summary-addons" class="space-y-1"></div>

          <div class="flex justify-between text-orange-500 font-semibold">
            <span>Deposit due today (50%)</span>
            <span>Â£<span id="deposit-display">0</span></span>
          </div>

          <p class="text-xs opacity-60 mt-2">
            The remaining balance is payable on the session day.
          </p>
          <p class="text-xs opacity-60">
            Custom Production projects are quoted individually based on scope and timeline.
          </p>
        </div>

        <!-- Trust Message -->
        <p class="text-center text-sm opacity-70">
          ðŸ”’ Secure booking Â· No payment taken until your session is confirmed
        </p>

        <!-- Submit -->
        <button
          type="submit"
          id="booking-submit"
          class="w-full h-14 rounded-lg bg-orange-600 font-bold text-lg hover:bg-orange-500 transition"
        >
          Book & Pay Deposit
        </button>

        <p class="text-center text-sm opacity-60">
          You'll be redirected to secure payment via Stripe.
        </p>

        <div data-netlify-recaptcha="true"></div>
      </form>

    </div>
  </div>
</section>

<!-- ========================================== -->
<!-- ABOUT SECTION -->
<!-- ========================================== -->
<section id="about" class="py-24 px-6 border-t" style="background: var(--bg-section); border-color: var(--border-soft);">
  <div class="max-w-3xl mx-auto text-center">
    <h2 class="text-4xl md:text-5xl font-bold mb-10">About Studio XV</h2>

    <p class="text-lg leading-relaxed" style="color: var(--text-muted);">
      Studio XV is a professional recording and production space built for
      artists who value sound quality, creative freedom, and a stress-free
      environment. With over 15 years of experience, we specialise in recording,
      mixing, mastering, and production across multiple genres.
    </p>
  </div>
</section>

<footer class="py-12 text-center opacity-70">
  Â© 2026 Studio XV. All rights reserved.
</footer>

<!-- RESTORED FROM LIVE SITE â€” WaveSurfer.js CDN -->
<script src="https://unpkg.com/wavesurfer.js@7"></script>

<!-- RESTORED FROM LIVE SITE â€” Portfolio player controls -->
<script src="js/portfolio-player.js"></script>

<!-- Service Modal & Mobile Menu JavaScript -->
<script>
  // Mobile Menu Toggle
  const menuToggle = document.getElementById('menu-toggle');
  const menuClose = document.getElementById('menu-close');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileLinks = mobileMenu.querySelectorAll('a');

  menuToggle.addEventListener('click', () => {
    mobileMenu.style.transform = 'translateX(0)';
  });

  menuClose.addEventListener('click', () => {
    mobileMenu.style.transform = 'translateX(100%)';
  });

  mobileLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.style.transform = 'translateX(100%)';
    });
  });

  // Service Modal System
  const serviceModal = document.getElementById('service-modal');
  const modalOverlay = document.getElementById('service-modal-overlay');
  const modalClose = document.getElementById('service-modal-close');
  const modalBody = document.getElementById('service-modal-body');

  // Service content data
  const serviceContent = {
    recording: {
      title: 'Recording',
      content: `
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Recording</h2>
        <p class="text-lg opacity-80 leading-relaxed mb-8">
          Professional recording services in a comfortable studio environment designed for capturing your best performance.
        </p>

        <div class="space-y-6 mb-8">
          <div>
            <h3 class="text-xl font-bold mb-2">What's Included</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Professional recording equipment and acoustically treated space</li>
              <li>â€¢ Engineer to handle technical setup and recording</li>
              <li>â€¢ Session files delivered in high-quality WAV format</li>
              <li>â€¢ Unlimited takes to get the perfect performance</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Pricing</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Hourly Session â€” Â£30/hr</li>
              <li>â€¢ Half-Day (4hrs) â€” Â£140</li>
              <li>â€¢ Full-Day (8hrs) â€” Â£260</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Turnaround</h3>
            <p class="opacity-80">Session files delivered within 24 hours of recording.</p>
          </div>
        </div>

        <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
          Book Recording Session
        </a>
      `
    },
    mixing: {
      title: 'Mixing',
      content: `
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Mixing</h2>
        <p class="text-lg opacity-80 leading-relaxed mb-8">
          Transform your raw recordings into polished, professional tracks with expert mixing services.
        </p>

        <div class="space-y-6 mb-8">
          <div>
            <h3 class="text-xl font-bold mb-2">What's Included</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Balance, EQ, compression, and effects processing</li>
              <li>â€¢ Stereo enhancement and spatial placement</li>
              <li>â€¢ Up to 3 revisions to ensure you're satisfied</li>
              <li>â€¢ High-quality stereo mix delivered in WAV format</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Pricing</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Per Track â€” Â£50</li>
              <li>â€¢ Mix + Master â€” Â£75</li>
              <li>â€¢ EP (4â€“6 tracks) â€” Â£280</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Turnaround</h3>
            <p class="opacity-80">3â€“5 days for single tracks. EP projects typically 7â€“10 days.</p>
          </div>
        </div>

        <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
          Book Mixing Service
        </a>
      `
    },
    mastering: {
      title: 'Mastering',
      content: `
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Mastering</h2>
        <p class="text-lg opacity-80 leading-relaxed mb-8">
          Final polish for your tracks, ensuring they sound consistent and professional across all playback systems.
        </p>

        <div class="space-y-6 mb-8">
          <div>
            <h3 class="text-xl font-bold mb-2">What's Included</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Loudness optimization and dynamic control</li>
              <li>â€¢ Tonal balance and frequency enhancement</li>
              <li>â€¢ Multiple delivery formats (streaming, CD, vinyl-ready)</li>
              <li>â€¢ 1 revision included per track</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Pricing</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Single â€” Â£35</li>
              <li>â€¢ EP (4â€“6 tracks) â€” Â£120</li>
              <li>â€¢ Album (10+ tracks) â€” Â£250</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Turnaround</h3>
            <p class="opacity-80">2â€“3 days for singles. Albums typically 5â€“7 days.</p>
          </div>
        </div>

        <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
          Book Mastering Service
        </a>
      `
    },
    production: {
      title: 'Production',
      content: `
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Production</h2>
        <p class="text-lg opacity-80 leading-relaxed mb-8">
          Original beats and custom production tailored to your sound and creative vision.
        </p>

        <div class="space-y-6 mb-8">
          <div>
            <h3 class="text-xl font-bold mb-2">What's Included</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ High-quality instrumental production</li>
              <li>â€¢ Stems provided for mixing flexibility</li>
              <li>â€¢ Tagged MP3 preview before purchase</li>
              <li>â€¢ License agreement included</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Pricing</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Beat Lease â€” Â£40</li>
              <li>â€¢ Exclusive Beat â€” Â£150</li>
              <li>â€¢ Custom Production â€” Â£500 (based on scope)</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Turnaround</h3>
            <p class="opacity-80">Beat leases delivered instantly. Custom production 7â€“14 days depending on complexity.</p>
          </div>
        </div>

        <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
          Book Production Service
        </a>
      `
    },
    lessons: {
      title: 'Lessons',
      content: `
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Production Lessons</h2>
        <p class="text-lg opacity-80 leading-relaxed mb-8">
          One-to-one Zoom sessions focused on your specific production challenges and goals.
        </p>

        <div class="space-y-6 mb-8">
          <div>
            <h3 class="text-xl font-bold mb-2">What's Included</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Live screen-sharing and real-time feedback</li>
              <li>â€¢ Personalized guidance on your projects</li>
              <li>â€¢ Focus on arrangement, mixing, sound design, or workflow</li>
              <li>â€¢ Session recording provided for later review</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Pricing</h3>
            <ul class="space-y-2 opacity-80">
              <li>â€¢ Hourly Session â€” Â£40/hr</li>
              <li>â€¢ 2-Hour Session â€” Â£80</li>
              <li>â€¢ 4-Hour Session â€” Â£160</li>
            </ul>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Format</h3>
            <p class="opacity-80">All lessons conducted via Zoom. Flexible scheduling available.</p>
          </div>
        </div>

        <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
          Book a Lesson
        </a>
      `
    },
    addons: {
      title: 'Add-Ons',
      content: `
        <h2 class="text-3xl md:text-4xl font-bold mb-6">Add-Ons</h2>
        <p class="text-lg opacity-80 leading-relaxed mb-8">
          Enhance your session with additional services for a polished, professional result.
        </p>

        <div class="space-y-6 mb-8">
          <div>
            <h3 class="text-xl font-bold mb-2">Vocal Tuning â€” Â£25</h3>
            <p class="opacity-80">Professional pitch correction and timing adjustments to ensure your vocals sound natural and polished.</p>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Stems Export â€” Â£20</h3>
            <p class="opacity-80">Individual track stems delivered for DJ use, remixes, or archival purposes.</p>
          </div>

          <div>
            <h3 class="text-xl font-bold mb-2">Rush Delivery â€” +50%</h3>
            <p class="opacity-80">Expedited turnaround for urgent projects. Your mix or master prioritized and delivered within 24â€“48 hours.</p>
          </div>
        </div>

        <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
          Book with Add-Ons
        </a>
      `
    }
  };

  // Open service modal
  function openServiceModal(serviceType) {
    const service = serviceContent[serviceType];
    if (service) {
      modalBody.innerHTML = service.content;
      serviceModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
  }

  // Open "How It Works" modal
  function openHowItWorksModal() {
    modalBody.innerHTML = `
      <h2 class="text-3xl md:text-4xl font-bold mb-6">How Sessions Work</h2>
      <p class="text-lg opacity-80 leading-relaxed mb-8">
        From booking to delivery, here's what to expect when working with Studio XV.
      </p>

      <div class="space-y-6 mb-8">
        <div>
          <h3 class="text-xl font-bold mb-2">1. Browse Services</h3>
          <p class="opacity-80">Explore our services and pricing. Each service includes detailed information about what's included and expected turnaround times.</p>
        </div>

        <div>
          <h3 class="text-xl font-bold mb-2">2. Book Your Session</h3>
          <p class="opacity-80">Select your service, choose any add-ons, and pay a 50% deposit to secure your booking. We'll confirm your session date and time.</p>
        </div>

        <div>
          <h3 class="text-xl font-bold mb-2">3. Session Day</h3>
          <p class="opacity-80">Arrive on time (or send your files). We'll work together to capture or polish your sound with professional equipment and expertise.</p>
        </div>

        <div>
          <h3 class="text-xl font-bold mb-2">4. Review &amp; Delivery</h3>
          <p class="opacity-80">Receive your files for review. We include revisions to ensure you're completely satisfied with the final result.</p>
        </div>
      </div>

      <a href="#booking" onclick="closeServiceModal()" class="inline-block px-10 py-4 rounded-lg text-lg font-semibold text-white transition hover:opacity-90" style="background: var(--accent);">
        Book a Session
      </a>
    `;
    serviceModal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  // Close modal
  function closeServiceModal() {
    serviceModal.classList.remove('active');
    document.body.style.overflow = '';
  }

  // Close modal on overlay click
  modalOverlay.addEventListener('click', closeServiceModal);
  
  // Close modal on close button click
  modalClose.addEventListener('click', closeServiceModal);

  // Close modal on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && serviceModal.classList.contains('active')) {
      closeServiceModal();
    }
  });

  // Make functions globally accessible
  window.openServiceModal = openServiceModal;
  window.openHowItWorksModal = openHowItWorksModal;
  window.closeServiceModal = closeServiceModal;
</script>

<!-- Booking Form Logic -->
<script>
  // Booking form state and pricing
  const bookingState = {
    service: '',
    hours: 2,
    package: '',
    addons: []
  };

  const pricing = {
    recording: {
      hourly: 30,
      packages: {
        'half-day': { hours: 4, price: 140 },
        'full-day': { hours: 8, price: 260 }
      }
    },
    mixing: {
      packages: {
        'per-track': { price: 50, label: 'Per Track â€” Â£50' },
        'mix-master': { price: 75, label: 'Mix + Master â€” Â£75' },
        'ep': { price: 280, label: 'EP (4â€“6 tracks) â€” Â£280' }
      }
    },
    mastering: {
      packages: {
        'single': { price: 35, label: 'Single â€” Â£35' },
        'ep': { price: 120, label: 'EP (4â€“6 tracks) â€” Â£120' },
        'album': { price: 250, label: 'Album (10+ tracks) â€” Â£250' }
      }
    },
    production: {
      packages: {
        'beat-lease': { price: 40, label: 'Beat Lease â€” Â£40' },
        'exclusive': { price: 150, label: 'Exclusive Beat â€” Â£150' },
        'custom': { price: 500, label: 'Custom Production â€” Â£500' }
      }
    },
    lessons: {
      hourly: 40,
      packages: {
        '2-hour': { hours: 2, price: 80 },
        '4-hour': { hours: 4, price: 160 }
      }
    },
    addons: {
      vocalTuning: 25,
      stems: 20,
      rush: 'percentage' // 50% of base price
    }
  };

  // Get DOM elements
  const serviceSelect = document.getElementById('service-select');
  const hoursWrapper = document.getElementById('hours-wrapper');
  const hoursInput = document.getElementById('hours-input');
  const packageWrapper = document.getElementById('package-wrapper');
  const packageSelect = document.getElementById('package-select');
  const totalDisplay = document.getElementById('total-display');
  const depositDisplay = document.getElementById('deposit-display');
  const summaryAddons = document.getElementById('summary-addons');
  const addonCheckboxes = document.querySelectorAll('.addon-checkbox');

  // Service selection handler
  serviceSelect.addEventListener('change', function() {
    const service = this.value;
    bookingState.service = service;
    bookingState.package = '';
    
    // Reset displays
    hoursWrapper.classList.add('hidden');
    packageWrapper.classList.add('hidden');
    packageSelect.innerHTML = '<option value="">Choose a packageâ€¦</option>';
    
    if (!service) {
      calculateTotal();
      return;
    }

    // Show appropriate options based on service
    if (service === 'recording' || service === 'lessons') {
      // Hourly services - show package options first (hours come after package selection)
      packageWrapper.classList.remove('hidden');
      
      const packages = pricing[service].packages;
      Object.keys(packages).forEach(key => {
        const pkg = packages[key];
        const option = document.createElement('option');
        option.value = key;
        option.textContent = `${key.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())} (${pkg.hours}hrs) â€” Â£${pkg.price}`;
        packageSelect.appendChild(option);
      });
      
      // Add hourly option
      const hourlyOption = document.createElement('option');
      hourlyOption.value = 'hourly';
      hourlyOption.textContent = `Hourly â€” Â£${pricing[service].hourly}/hr`;
      packageSelect.insertBefore(hourlyOption, packageSelect.firstChild.nextSibling);
      
    } else {
      // Package-only services (mixing, mastering, production)
      packageWrapper.classList.remove('hidden');
      
      const packages = pricing[service].packages;
      Object.keys(packages).forEach(key => {
        const pkg = packages[key];
        const option = document.createElement('option');
        option.value = key;
        option.textContent = pkg.label;
        packageSelect.appendChild(option);
      });
    }
    
    calculateTotal();
  });

  // Package selection handler
  packageSelect.addEventListener('change', function() {
    bookingState.package = this.value;
    
    // Show/hide hours input based on package selection
    if (bookingState.package === 'hourly' && (bookingState.service === 'recording' || bookingState.service === 'lessons')) {
      hoursWrapper.classList.remove('hidden');
    } else {
      hoursWrapper.classList.add('hidden');
    }
    
    calculateTotal();
  });

  // Hours input handler
  hoursInput.addEventListener('input', function() {
    bookingState.hours = parseInt(this.value) || 1;
    if (bookingState.package === 'hourly') {
      calculateTotal();
    }
  });

  // Addon checkboxes handler
  addonCheckboxes.forEach(checkbox => {
    checkbox.addEventListener('change', function() {
      if (this.checked) {
        bookingState.addons.push(this.value);
      } else {
        bookingState.addons = bookingState.addons.filter(a => a !== this.value);
      }
      calculateTotal();
    });
  });

  // Calculate total price
  function calculateTotal() {
    let basePrice = 0;
    const service = bookingState.service;
    const pkg = bookingState.package;
    
    if (!service) {
      updatePriceDisplay(0);
      return;
    }
    
    // Calculate base price
    if (pkg === 'hourly') {
      basePrice = pricing[service].hourly * bookingState.hours;
    } else if (pkg && pricing[service].packages[pkg]) {
      basePrice = pricing[service].packages[pkg].price;
    }
    
    // Calculate addons
    let addonTotal = 0;
    const addonDetails = [];
    
    bookingState.addons.forEach(addon => {
      if (pricing.addons[addon] === 'percentage') {
        // Rush delivery is 50% of base
        const rushCost = Math.round(basePrice * 0.5);
        addonTotal += rushCost;
        addonDetails.push({ name: 'Rush Delivery', cost: rushCost });
      } else {
        addonTotal += pricing.addons[addon];
        const addonName = addon === 'vocalTuning' ? 'Vocal Tuning' : addon === 'stems' ? 'Stems Export' : addon;
        addonDetails.push({ name: addonName, cost: pricing.addons[addon] });
      }
    });
    
    const total = basePrice + addonTotal;
    updatePriceDisplay(total, addonDetails);
  }

  // Update price display
  function updatePriceDisplay(total, addonDetails = []) {
    totalDisplay.textContent = total;
    const deposit = Math.round(total * 0.5);
    depositDisplay.textContent = deposit;
    
    // Update addon summary
    summaryAddons.innerHTML = '';
    addonDetails.forEach(addon => {
      const addonLine = document.createElement('div');
      addonLine.className = 'flex justify-between text-sm opacity-70';
      addonLine.innerHTML = `<span>+ ${addon.name}</span><span>Â£${addon.cost}</span>`;
      summaryAddons.appendChild(addonLine);
    });
    
    // Add animation
    depositDisplay.classList.add('updating');
    setTimeout(() => depositDisplay.classList.remove('updating'), 400);
  }

  // Initialize
  calculateTotal();

  // Handle form submission with Stripe checkout
  const bookingForm = document.querySelector('form[name="booking"]');
  const bookingSubmit = document.getElementById('booking-submit');
  
  bookingForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // Validate form
    if (!bookingState.service || !bookingState.package) {
      alert('Please select a service and package');
      return;
    }
    
    // Check if this is a custom production (no immediate checkout)
    if (bookingState.service === 'production' && bookingState.package !== 'hourly') {
      // Submit form normally for custom production quotes
      bookingForm.submit();
      return;
    }
    
    // Disable button and show loading
    bookingSubmit.disabled = true;
    bookingSubmit.textContent = 'Processing...';
    
    try {
      // Calculate final pricing
      let basePrice = 0;
      const service = bookingState.service;
      const pkg = bookingState.package;
      
      if (pkg === 'hourly') {
        basePrice = pricing[service].hourly * bookingState.hours;
      } else if (pkg && pricing[service].packages[pkg]) {
        basePrice = pricing[service].packages[pkg].price;
      }
      
      // Calculate addon costs
      const addonsList = [];
      bookingState.addons.forEach(addon => {
        if (pricing.addons[addon] === 'percentage') {
          const rushCost = Math.round(basePrice * 0.5);
          addonsList.push({ label: 'Rush Delivery (+50%)', price: rushCost });
        } else {
          const addonName = addon === 'vocalTuning' ? 'Vocal Tuning' : addon === 'stems' ? 'Stems Export' : addon;
          addonsList.push({ label: addonName, price: pricing.addons[addon] });
        }
      });
      
      const total = parseInt(totalDisplay.textContent);
      const deposit = parseInt(depositDisplay.textContent);
      
      // Get package name for display
      let packageName = pkg;
      if (pkg === 'hourly') {
        packageName = `Hourly (${bookingState.hours}hrs)`;
      } else if (pricing[service].packages[pkg]) {
        packageName = pricing[service].packages[pkg].name;
      }
      
      // Call Netlify function to create Stripe checkout
      const response = await fetch('/.netlify/functions/create-checkout', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          service: service.charAt(0).toUpperCase() + service.slice(1),
          packageName: packageName,
          hours: pkg === 'hourly' ? bookingState.hours : null,
          addons: addonsList,
          total: total,
          deposit: deposit
        })
      });
      
      const data = await response.json();
      
      if (response.ok && data.url) {
        // Redirect to Stripe Checkout
        window.location.href = data.url;
      } else {
        throw new Error(data.error || 'Failed to create checkout session');
      }
      
    } catch (error) {
      console.error('Checkout error:', error);
      alert('Sorry, there was an error processing your booking. Please try again or contact us directly.');
      
      // Re-enable button
      bookingSubmit.disabled = false;
      bookingSubmit.textContent = 'Submit Booking Request';
    }
  });
</script>

</body>
</html>
