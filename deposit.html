<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booking Confirmed â€“ Studio XV</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --bg-main: #000000;
      --bg-section: #0d0d0d;
      --bg-card: #111111;
      --text-main: #ffffff;
      --text-muted: #b5b5b5;
      --accent: #ec4899;
    }

    @media (prefers-color-scheme: light) {
      :root {
        --bg-main: #ffffff;
        --bg-section: #f5f5f5;
        --bg-card: #ffffff;
        --text-main: #0b0b0b;
        --text-muted: #555555;
      }
    }

    body {
      background: var(--bg-main);
      color: var(--text-main);
    }

    .checkmark {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: block;
      stroke-width: 2;
      stroke: #4ade80;
      stroke-miterlimit: 10;
      margin: 10% auto;
      box-shadow: inset 0px 0px 0px #4ade80;
      animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
    }

    .checkmark__circle {
      stroke-dasharray: 166;
      stroke-dashoffset: 166;
      stroke-width: 2;
      stroke-miterlimit: 10;
      stroke: #4ade80;
      fill: none;
      animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
    }

    .checkmark__check {
      transform-origin: 50% 50%;
      stroke-dasharray: 48;
      stroke-dashoffset: 48;
      animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
    }

    @keyframes stroke {
      100% {
        stroke-dashoffset: 0;
      }
    }

    @keyframes scale {
      0%, 100% {
        transform: none;
      }
      50% {
        transform: scale3d(1.1, 1.1, 1);
      }
    }

    @keyframes fill {
      100% {
        box-shadow: inset 0px 0px 0px 30px #4ade80;
      }
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center px-6">
  
  <div class="max-w-2xl w-full text-center">
    
    <!-- Animated Checkmark -->
    <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
      <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
      <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
    </svg>

    <h1 class="text-4xl md:text-5xl font-bold mb-6">
      Deposit Confirmed! ðŸŽ‰
    </h1>

    <div class="rounded-2xl p-8 mb-8" style="background: var(--bg-card);">
      <p class="text-lg mb-6" style="color: var(--text-muted);">
        Your booking has been received and your deposit payment was successful.
      </p>

      <div id="booking-details" class="text-left space-y-4 mb-6">
        <!-- Populated by JavaScript -->
      </div>

      <div class="bg-green-500/10 border border-green-500/30 rounded-lg p-4 mb-6">
        <p class="text-sm">
          âœ… <strong>Deposit paid:</strong> <span id="deposit-amount">â€”</span><br>
          ðŸ’° <strong>Remaining balance:</strong> <span id="remaining-amount">â€”</span><br>
          <span class="text-xs opacity-75">Payable on the day of your session</span>
        </p>
      </div>

      <p class="text-sm" style="color: var(--text-muted);">
        We've sent a confirmation email with all the details. If you have any questions or need to reschedule, please contact us directly.
      </p>
    </div>

    <div class="flex gap-4 justify-center flex-wrap">
      <a href="/"
         class="px-8 py-3 rounded-lg font-semibold transition hover:opacity-90"
         style="background: var(--accent); color: white;">
        Back to Home
      </a>
      
      <a href="mailto:bookings@studioxv.co.uk"
         class="px-8 py-3 rounded-lg font-semibold transition border"
         style="border-color: var(--accent); color: var(--accent);">
        Contact Us
      </a>
    </div>

  </div>

  <script>
    // Retrieve booking data from localStorage
    const bookingData = JSON.parse(localStorage.getItem('bookingData') || '{}');

    if (bookingData.service) {
      const detailsContainer = document.getElementById('booking-details');
      const depositAmount = document.getElementById('deposit-amount');
      const remainingAmount = document.getElementById('remaining-amount');

      // Build booking summary
      let html = `
        <div class="flex justify-between py-2 border-b border-white/10">
          <span class="font-semibold">Service:</span>
          <span>${bookingData.service}</span>
        </div>
        <div class="flex justify-between py-2 border-b border-white/10">
          <span class="font-semibold">Package:</span>
          <span>${bookingData.package}</span>
        </div>
      `;

      if (bookingData.hours) {
        html += `
          <div class="flex justify-between py-2 border-b border-white/10">
            <span class="font-semibold">Hours:</span>
            <span>${bookingData.hours}</span>
          </div>
        `;
      }

      if (bookingData.addons && bookingData.addons.length > 0) {
        html += `
          <div class="py-2 border-b border-white/10">
            <span class="font-semibold">Add-ons:</span>
            <ul class="mt-2 space-y-1 text-sm opacity-80">
              ${bookingData.addons.map(a => `
                <li class="flex justify-between">
                  <span>${a.label}</span>
                  <span>${typeof a.price === 'number' ? 'Â£' + a.price : a.price}</span>
                </li>
              `).join('')}
            </ul>
          </div>
        `;
      }

      html += `
        <div class="flex justify-between py-2 font-bold text-lg">
          <span>Total Session Price:</span>
          <span>Â£${bookingData.total.toFixed(2)}</span>
        </div>
      `;

      detailsContainer.innerHTML = html;

      // Update payment amounts
      depositAmount.textContent = `Â£${bookingData.deposit.toFixed(2)}`;
      const remaining = bookingData.total - bookingData.deposit;
      remainingAmount.textContent = `Â£${remaining.toFixed(2)}`;
    } else {
      // No booking data found
      document.getElementById('booking-details').innerHTML = `
        <p class="text-center opacity-60">
          No booking details found. Please check your confirmation email.
        </p>
      `;
    }
  </script>
</body>
</html>
